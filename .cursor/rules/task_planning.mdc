---
description: Task Planning
globs:
alwaysApply: false
---

# Task Planning Rule

## Overview
When a user describes a task, agents should **plan first, implement later**. This rule establishes a structured planning process that produces documentation before any code changes.

## Planning Process

### 1. Create Task Directory
- Create `tasks/{task_name}/` directory where `task_name` is a short, descriptive name derived from user's request
- Task name should be kebab-case (e.g., `user-authentication`, `data-export`, `ui-refactor`)

### 2. Research Phase
- Use read-only tools to understand the codebase
- Analyze existing patterns, architecture, and dependencies
- Document findings in `tasks/{task_name}/research.md`
- **No code changes during research**

### 3. Planning Documentation
Create these files in the task directory:

#### `tasks/{task_name}/plan.md`
- **Objective**: Clear task description
- **Scope**: What's included/excluded
- **Approach**: High-level strategy
- **Components**: Files/classes to modify
- **Dependencies**: External libraries, APIs, or features needed
- **Risks**: Potential challenges or blockers

#### `tasks/{task_name}/implementation.md`
**MUST follow this exact format:**

```markdown
# {Task Name} Implementation Guide

## Implementation Steps

### Phase 1: {Phase Name} ‚è≥

#### Step 1.1: {Step Name}
**Tasks:**
- [ ] Task 1 description
- [ ] Task 2 description
- [ ] Task 3 description

**Testing:**
- [ ] Test 1 description
- [ ] Test 2 description
- [ ] Test 3 description

**Success Criteria:**
- [ ] Criterion 1
- [ ] Criterion 2
- [ ] Criterion 3

#### Step 1.2: {Step Name}
**Tasks:**
- [ ] Task 1 description
- [ ] Task 2 description

**Testing:**
- [ ] Test 1 description
- [ ] Test 2 description

**Success Criteria:**
- [ ] Criterion 1
- [ ] Criterion 2

### Phase 2: {Phase Name} ‚è≥

#### Step 2.1: {Step Name}
**Tasks:**
- [ ] Task 1 description
- [ ] Task 2 description

**Testing:**
- [ ] Test 1 description
- [ ] Test 2 description

**Success Criteria:**
- [ ] Criterion 1
- [ ] Criterion 2
```

**Format Requirements:**
- Use emoji status indicators for phases and steps:
  - `‚è≥` = Phase not touched yet (initial state)
  - No emoji = Step not touched yet (initial state)
  - `üåæ` = Phase in progress (partially complete)
  - `üëà` = Step in progress (partially complete)
  - `üèÜ` = Phase completed (fully complete)
  - `‚úÖ` = Step completed (fully complete)
- Use `Phase X: {Name} {emoji}` format for phases
- Use `Step X.Y: {Name} {emoji}` format for steps
- Each step MUST have "Tasks:" section with bullet points
- Each step MUST have "Testing:" section with bullet points
- Each step MUST have "Success Criteria:" section with bullet points
- Use `[ ]` for incomplete items, `[x]` for completed items
- Start all phases and steps as not touched yet (‚è≥)

### 4. Interactive Planning
- Ask clarifying questions about requirements
- Present multiple approaches when applicable
- Request user input on architectural decisions
- Validate assumptions with user before proceeding
- Balance user involvement with task complexity

### 5. Supporting Documentation
As needed, create:
- `api-docs/`: External API documentation
- `samples/`: Example requests/responses
- `references/`: Relevant code samples or patterns
- `mockups/`: UI sketches or wireframes

## Implementation Trigger
Do not perform any implementation, the only purpose at this point is to make the plan and adjust it based on user asks.

## Guidelines
- Keep planning proportional to task complexity
- Focus on understanding
- Document decisions and rationale
- Use the task folder for future reference and documentation
- Follow the exact implementation.md format specified above
